//===================================================================================================
/*
UNIVERSIDADE FEDERAL DE UBERLÂNDIA
INSTITUTO DE MATEMÁTICA E DE ESTATÍSTICA
DISCIPLINA: CÁLCULO NUMÉRICO (FAMAT31032)
CURSO: CIÊNCIA DA COMPUTAÇÃO
CÓDIGO: MÉTODO DE NEWTON
*/
//===================================================================================================
/* PRÉ PROCESSADORES */
//===================================================================================================
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
//===================================================================================================
/* SUB-ROTINAS */
//===================================================================================================
// FUNÇÃO f(x)
//===================================================================================================
double f (double x) {
    return (x - cos(x));
}
//===================================================================================================
// DERIVADA DA FUNÇÃO f(x)
//===================================================================================================
double df (double x) {
    return (1.0 + sin(x));
}
//===================================================================================================
/* PROGRAMA PRINCIPAL */
//===================================================================================================
int main(int argc, char *argv[]) {
    //===============================================================================================
    /* DECLARAÇÃO DE VARIÁVEIS */
    //===============================================================================================
    int k; // contador do número de iterações
    double xold; // VARIAVEL AUXILIAR 1
    double xnew; // VARIAVEL AUXILIAR 2
    double er; // VARIAVEL AUXILIAR 2
    double eps; // precisão (acurácia)
    //===============================================================================================
    /* LIMPEZA DA TELA DO TERMINAL */
    //===============================================================================================
    system("cls");
    //===============================================================================================
    /* ENTRADA DE DADOS */
    //===============================================================================================
    xold = atof(argv[1]);  
    eps = atof(argv[2]);
    //===============================================================================================
    /* APLICAÇÃO DO METODO DA BISSECÇÃO */
    //===============================================================================================
    k = 0;
    er = 1.0;
    while( er  > eps ){
        ++k;
        xnew = xold - f(xold) / df(xold);
        er = fabs(xnew - xold) / fabs(xnew);
        xold = xnew;
    }

    //===============================================================================================
    /* IMPRESSÃO DOS RESULTADOS */
    //===============================================================================================
    printf("Aproximacao paar x: %.15lf\n", xnew);
    printf("f(x): % e\n", f(xnew));
    printf("Numero de iteracoes: %d \n", k);
    printf("Erro Relativo: %e\n");

    //===============================================================================================
    /* FIM DO PROGRAMA */
    //===============================================================================================
    return 0;
}
